{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/tanmay/mental-health-assistant/frontend/lib/withAuth.js"],"sourcesContent":["'use client';\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useEffect, useRef } from 'react';\r\nimport DesignerLoader from '@/app/components/DesignerLoader';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nexport default function withAuth(Component) {\r\n  return function AuthWrapper(props) {\r\n    const { status } = useSession();\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const hasRedirected = useRef(false);\r\n\r\n    useEffect(() => {\r\n      const allowedPaths = ['/', '/login', '/signup'];\r\n      \r\n      if (status === 'unauthenticated' && !allowedPaths.includes(pathname) && !hasRedirected.current) {\r\n        hasRedirected.current = true;\r\n        \r\n        // Show toast immediately\r\n        toast.error('Please login to access this page, redirecting to login page', {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          theme: \"light\",\r\n        });\r\n\r\n        // Redirect after 2 seconds\r\n        setTimeout(() => {\r\n          router.push('/login');\r\n        }, 3000);\r\n      }\r\n    }, [status, pathname, router]);\r\n\r\n    // Always render ToastContainer\r\n    const toastContainer = (\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n    );\r\n\r\n    if (status === 'loading') {\r\n      return (\r\n        <div className='h-screen w-screen flex justify-center items-center'>\r\n          {toastContainer}\r\n          <DesignerLoader />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // For unauthenticated users on protected routes, show loading state while toast is displayed\r\n    const allowedPaths = ['/', '/login', '/signup'];\r\n    if (status === 'unauthenticated' && !allowedPaths.includes(pathname)) {\r\n      return (\r\n        <div className='h-screen w-screen flex justify-center items-center'>\r\n          {toastContainer}\r\n          <DesignerLoader />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // For all other cases, render the component\r\n    return (\r\n      <>\r\n        <Component {...props} />\r\n        {toastContainer}\r\n      </>\r\n    );\r\n  };\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS,SAAS,SAAS;IACxC,OAAO,SAAS,YAAY,KAAK;QAC/B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4JAAU;QAC7B,MAAM,SAAS,IAAA,+IAAS;QACxB,MAAM,WAAW,IAAA,iJAAW;QAC5B,MAAM,gBAAgB,IAAA,+MAAM,EAAC;QAE7B,IAAA,kNAAS,EAAC;YACR,MAAM,eAAe;gBAAC;gBAAK;gBAAU;aAAU;YAE/C,IAAI,WAAW,qBAAqB,CAAC,aAAa,QAAQ,CAAC,aAAa,CAAC,cAAc,OAAO,EAAE;gBAC9F,cAAc,OAAO,GAAG;gBAExB,yBAAyB;gBACzB,4JAAK,CAAC,KAAK,CAAC,+DAA+D;oBACzE,UAAU;oBACV,WAAW;oBACX,iBAAiB;oBACjB,cAAc;oBACd,cAAc;oBACd,WAAW;oBACX,UAAU;oBACV,OAAO;gBACT;gBAEA,2BAA2B;gBAC3B,WAAW;oBACT,OAAO,IAAI,CAAC;gBACd,GAAG;YACL;QACF,GAAG;YAAC;YAAQ;YAAU;SAAO;QAE7B,+BAA+B;QAC/B,MAAM,+BACJ,8OAAC,qKAAc;YACb,UAAS;YACT,WAAW;YACX,iBAAiB;YACjB,aAAa;YACb,YAAY;YACZ,KAAK;YACL,gBAAgB;YAChB,SAAS;YACT,YAAY;YACZ,OAAM;;;;;;QAIV,IAAI,WAAW,WAAW;YACxB,qBACE,8OAAC;gBAAI,WAAU;;oBACZ;kCACD,8OAAC,8IAAc;;;;;;;;;;;QAGrB;QAEA,6FAA6F;QAC7F,MAAM,eAAe;YAAC;YAAK;YAAU;SAAU;QAC/C,IAAI,WAAW,qBAAqB,CAAC,aAAa,QAAQ,CAAC,WAAW;YACpE,qBACE,8OAAC;gBAAI,WAAU;;oBACZ;kCACD,8OAAC,8IAAc;;;;;;;;;;;QAGrB;QAEA,4CAA4C;QAC5C,qBACE;;8BACE,8OAAC;oBAAW,GAAG,KAAK;;;;;;gBACnB;;;IAGP;AACF"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/tanmay/mental-health-assistant/frontend/lib/api.js"],"sourcesContent":["import { getSession } from \"next-auth/react\";\r\nimport dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nexport async function api(path, options = {}) {\r\n  const session = await getSession();\r\n\r\n  const res = await fetch(\r\n    `${process.env.NEXT_PUBLIC_API_URL}${path}`,\r\n    {\r\n      method: options.method || \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(session?.backendToken && {\r\n          Authorization: `Bearer ${session.backendToken}`,\r\n        }),\r\n      },\r\n      body: options.body ? JSON.stringify(options.body) : undefined,\r\n    }\r\n  );\r\n\r\n  if (!res.ok) throw new Error(\"API Error\");\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACA,gJAAM,CAAC,MAAM;AAEN,eAAe,IAAI,IAAI,EAAE,UAAU,CAAC,CAAC;IAC1C,MAAM,UAAU,MAAM,IAAA,4JAAU;IAEhC,MAAM,MAAM,MAAM,MAChB,gEAAqC,MAAM,EAC3C;QACE,QAAQ,QAAQ,MAAM,IAAI;QAC1B,SAAS;YACP,gBAAgB;YAChB,GAAI,SAAS,gBAAgB;gBAC3B,eAAe,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;YACjD,CAAC;QACH;QACA,MAAM,QAAQ,IAAI,GAAG,KAAK,SAAS,CAAC,QAAQ,IAAI,IAAI;IACtD;IAGF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/tanmay/mental-health-assistant/frontend/app/dashboard/page.js"],"sourcesContent":["'use client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { FaBrain, FaSmile, FaClock } from 'react-icons/fa';\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport withAuth from \"@/lib/withAuth\";\r\nimport { api } from '@/lib/api';\r\n\r\nconst Dashboard = () => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [insights, setInsights] = useState(null);\r\n  const [insightsLoading, setInsightsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchDashboardData = async () => {\r\n      try {\r\n        const result = await api('/dashboard');\r\n        setData(result);\r\n      } catch (err) {\r\n        console.error(\"Dashboard fetch error:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchInsights = async () => {\r\n      try {\r\n        const result = await api('/dashboard-insights');\r\n        setInsights(result);\r\n      } catch (err) {\r\n        console.error(\"Dashboard insights fetch error:\", err);\r\n      } finally {\r\n        setInsightsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchInsights();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <>\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <p className=\"text-gray-500\">Loading dashboard...</p>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n\r\n      <div className=\"min-h-screen bg-gray-50 px-4 py-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n\r\n          {/* Title */}\r\n          <h1 className=\"text-3xl font-semibold text-gray-800\">\r\n            Dashboard\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Your mental wellness overview\r\n          </p>\r\n\r\n          {/* If no data */}\r\n          {!data || data.message ? (\r\n            <div className=\"mt-10 bg-white p-6 rounded-xl shadow-sm\">\r\n              <p className=\"text-gray-600\">\r\n                No mood check-in found. Start with your first check-in.\r\n              </p>\r\n              <a\r\n                href=\"/mood-checkin\"\r\n                className=\"inline-block mt-4 bg-[#F99262] text-white px-6 py-2 rounded-lg\"\r\n              >\r\n                Daily Mood Check-In\r\n              </a>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Cards */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8\">\r\n\r\n                {/* Stress Level */}\r\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <FaBrain className=\"text-[#F99262] text-2xl\" />\r\n                    <h2 className=\"text-lg font-medium text-gray-800\">\r\n                      Stress Level\r\n                    </h2>\r\n                  </div>\r\n                  <p className=\"mt-4 text-2xl font-semibold text-gray-700\">\r\n                    {data.stressLevel}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500 mt-1\">\r\n                    Confidence: {(data.confidence * 100).toFixed(0)}%\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Mood */}\r\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <FaSmile className=\"text-[#F99262] text-2xl\" />\r\n                    <h2 className=\"text-lg font-medium text-gray-800\">\r\n                      Mood Today\r\n                    </h2>\r\n                  </div>\r\n                  <p className=\"mt-4 text-2xl font-semibold text-gray-700\">\r\n                    {data.mood}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Last Check-In */}\r\n                <div className=\"bg-white rounded-xl p-6 shadow-sm\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <FaClock className=\"text-[#F99262] text-2xl\" />\r\n                    <h2 className=\"text-lg font-medium text-gray-800\">\r\n                      Last Check-In\r\n                    </h2>\r\n                  </div>\r\n                  <p className=\"mt-4 text-gray-700\">\r\n                    {new Date(data.createdAt).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Recommendation */}\r\n              <div className=\"mt-8 bg-white p-6 rounded-xl shadow-sm\">\r\n                <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                  Suggested Action\r\n                </h2>\r\n                <p className=\"mt-3 text-gray-600\">\r\n                  {data.stressLevel === \"Low\" &&\r\n                    \"Maintain your routine and healthy habits.\"}\r\n                  {data.stressLevel === \"Moderate\" &&\r\n                    \"Take short breaks and try breathing exercises.\"}\r\n                  {data.stressLevel === \"High\" &&\r\n                    \"Consider reaching out to support resources or taking a break.\"}\r\n                </p>\r\n              </div>\r\n\r\n              {/* AI Mental Health Report */}\r\n              <div className=\"mt-10 bg-white p-6 rounded-xl shadow-sm\">\r\n                <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                  AI Mental Health Report\r\n                </h2>\r\n\r\n                {insightsLoading ? (\r\n                  <p className=\"mt-3 text-gray-500\">Generating daily summary...</p>\r\n                ) : insights?.report ? (\r\n                  <div className=\"mt-3 prose prose-sm max-w-none text-gray-700\">\r\n                    <ReactMarkdown>\r\n                      {insights.report}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"mt-3 text-gray-500\">\r\n                    Not enough data to generate a report yet.\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* AI Suggested Actions */}\r\n              <div className=\"mt-6 bg-white p-6 rounded-xl shadow-sm\">\r\n                <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                  AI Suggested Actions\r\n                </h2>\r\n\r\n                {insightsLoading ? (\r\n                  <p className=\"mt-3 text-gray-500\">Preparing suggestions...</p>\r\n                ) : insights?.suggestedActions ? (\r\n                  <div className=\"mt-3 prose prose-sm max-w-none text-gray-700\">\r\n                    <ReactMarkdown>\r\n                      {insights.suggestedActions}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"mt-3 text-gray-500\">\r\n                    Suggestions will appear after more check-ins.\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"mt-8 flex gap-4\">\r\n                <a\r\n                  href=\"/mood-checkin\"\r\n                  className=\"bg-[#F99262] text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Daily Mood Check-In\r\n                </a>\r\n                <a\r\n                  href=\"/assistant\"\r\n                  className=\"border border-[#F99262] text-[#F99262] px-6 py-3 rounded-lg\"\r\n                >\r\n                  Talk to AI Assistant\r\n                </a>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* Disclaimer */}\r\n          <p className=\"mt-10 text-xs text-gray-500 max-w-xl\">\r\n            MindLytica is not a medical diagnosis tool. The information provided is\r\n            for self-support and educational purposes only.\r\n          </p>\r\n\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withAuth(Dashboard);\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOA,MAAM,YAAY;IAChB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB;YACzB,IAAI;gBACF,MAAM,SAAS,MAAM,IAAA,iHAAG,EAAC;gBACzB,QAAQ;YACV,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;YAC1C,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,SAAS,MAAM,IAAA,iHAAG,EAAC;gBACzB,YAAY;YACd,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,mCAAmC;YACnD,SAAU;gBACR,mBAAmB;YACrB;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAI,SAAS;QACX,qBACE;sBACE,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;;IAIrC;IAEA,qBACE;kBAEE,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAGb,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;oBAKjC,CAAC,QAAQ,KAAK,OAAO,iBACpB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAgB;;;;;;0CAG7B,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;iFAKH;;0CAEE,8OAAC;gCAAI,WAAU;;kDAGb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,yJAAO;wDAAC,WAAU;;;;;;kEACnB,8OAAC;wDAAG,WAAU;kEAAoC;;;;;;;;;;;;0DAIpD,8OAAC;gDAAE,WAAU;0DACV,KAAK,WAAW;;;;;;0DAEnB,8OAAC;gDAAE,WAAU;;oDAA6B;oDAC3B,CAAC,KAAK,UAAU,GAAG,GAAG,EAAE,OAAO,CAAC;oDAAG;;;;;;;;;;;;;kDAKpD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,yJAAO;wDAAC,WAAU;;;;;;kEACnB,8OAAC;wDAAG,WAAU;kEAAoC;;;;;;;;;;;;0DAIpD,8OAAC;gDAAE,WAAU;0DACV,KAAK,IAAI;;;;;;;;;;;;kDAKd,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,yJAAO;wDAAC,WAAU;;;;;;kEACnB,8OAAC;wDAAG,WAAU;kEAAoC;;;;;;;;;;;;0DAIpD,8OAAC;gDAAE,WAAU;0DACV,IAAI,KAAK,KAAK,SAAS,EAAE,cAAc;;;;;;;;;;;;;;;;;;0CAM9C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAsC;;;;;;kDAGpD,8OAAC;wCAAE,WAAU;;4CACV,KAAK,WAAW,KAAK,SACpB;4CACD,KAAK,WAAW,KAAK,cACpB;4CACD,KAAK,WAAW,KAAK,UACpB;;;;;;;;;;;;;0CAKN,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAsC;;;;;;oCAInD,gCACC,8OAAC;wCAAE,WAAU;kDAAqB;;;;;mFAChC,UAAU,uBACZ,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,mMAAa;sDACX,SAAS,MAAM;;;;;;;;;;iGAIpB,8OAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;0CAOtC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAsC;;;;;;oCAInD,gCACC,8OAAC;wCAAE,WAAU;kDAAqB;;;;;mFAChC,UAAU,iCACZ,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,mMAAa;sDACX,SAAS,gBAAgB;;;;;;;;;;iGAI9B,8OAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;0CAQtC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,MAAK;wCACL,WAAU;kDACX;;;;;;kDAGD,8OAAC;wCACC,MAAK;wCACL,WAAU;kDACX;;;;;;;;;;;;;;kCAQP,8OAAC;wBAAE,WAAU;kCAAuC;;;;;;;;;;;;;;;;;;AAS9D;uCAEe,IAAA,0HAAQ,EAAC"}}]
}